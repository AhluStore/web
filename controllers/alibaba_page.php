<?php if ( ! defined('DOMAIN')) exit('No direct script access allowed');class alibaba_Page extends page {     public function __construct(){         parent::__construct();      }          public function index()    {           }    /*    * Wrapper all page override    */    public function render()    {        global $AhluOverride;        $breadCrumbs = array(            "slug"=>"#",            "title"=>""        );        //array_unshift($breadCrumbs,array("title"=>'<i class="fa fa-home">&nbsp;</i>',"slug"=>""));        $AhluOverride->add("ahlu_breadcrumb",function($seperate,$links) use($breadCrumbs){              $str = "";                        foreach($breadCrumbs as $i=> $item){                if($i==count($breadCrumbs)-1){                    $str.= '<li><a href="#" class="homepage-link">'.$item["title"].'</a></li>';                }else{                    $str.= '<li><a href="'.site_url($item["slug"]).'" class="homepage-link">'.$item["title"].'</a></li>';                }            }            return '<ul class="breadcrumb">'.$str.'</ul>';        },1);        //load SEO        $page = __FUNCTION__;         $title = meta_key_option("title_website");        $keyword =meta_key_option("keyword");        $title = htmlspecialchars(strip_tags($post->title));        $this->seo->setTitle("{$title}");        $this->seo->setKeyword($keyword." ".$title);        $this->seo->setDescription(htmlspecialchars(strip_tags($post->excerpt)));        $this->seo->setLanguage(LANG);        $this->seo->setCharset("utf-8");        $this->seo->setRobot("index, follow");        $this->seo->enableMobil();        $this->seo->setCanonical(site_url($post->url,true));        $img = rtrim(DOMAIN,"/").show_image(decode_key_value($post->image));        $this->seo->setImage($img);        $this->data["cls"] = " page page-default {$post->url} {$post->id_post}";        $this->data["seo"] = $this->seo->Meta();                   $this->data["content"] = $this->load->view(THEME."_page_render",array("post"=>$post),true);          //load theme        $this->showTemplate($this->data);     }           public function post($id=0)    {         if(empty($id)){            //404            $this->redirect(404,$params=array("error"=>"Page Not Found"));        }                $post = AhluEntity("view_post");        if(!$post->readObject(array(            "id_post"=>$id        ))){            //404            $this->redirect(404,$params=array("error"=>"Page Not Found"));        }       $post_data =  $post->Data();        AhluURL::Data("post",$post_data);        $breadCrumbs = post_breadCrumb($post_data);        //array_unshift($breadCrumbs,array("title"=>'<i class="fa fa-home">&nbsp;</i>',"slug"=>""));        AhluOverride()->add("ahlu_breadcrumb",function($seperate,$links) use($breadCrumbs){              $str = "";                        foreach($breadCrumbs as $i=> $item){                if($i==count($breadCrumbs)-1){                    $str.= '<li><a href="#" class="homepage-link">'.$item["title"].'</a></li>';                }else{                    $str.= '<li><a href="'.site_url($item["slug"]).'" class="homepage-link">'.$item["title"].'</a></li>';                }            }            return '<ul class="breadcrumb">'.$str.'</ul>';        },1);        //load SEO        $page = __FUNCTION__;         $title = meta_key_option("title_website");        $keyword =meta_key_option("keyword");        $title = htmlspecialchars(strip_tags($post->title));        $this->seo->setTitle("{$title}");        $this->seo->setKeyword($keyword." ".$title);        $this->seo->setDescription(htmlspecialchars(strip_tags($post->excerpt)));        $this->seo->setLanguage(LANG);        $this->seo->setCharset("utf-8");        $this->seo->setRobot("index, follow");        $this->seo->enableMobil();        $this->seo->setCanonical(site_url($post->url,true));        $img = rtrim(DOMAIN,"/").show_image(decode_key_value($post->image));        $this->seo->setImage($img);        $this->data["cls"] = " page {$post->url} {$post->id_post}";        $this->data["seo"] = $this->seo->Meta();          //get what template         $this->data["content"] = $this->load->view(template_view(THEME."_page_post"),array("post"=>(object)$post_data),true);          //load theme        $this->showTemplate($this->data);     }    public function category($id)    {            }       public function attachment($id=0)    {           }       ///////////////////////////////////////////    public function contact_us(){              $this->load->js("js/jquery.validate.js");        $this->load->js("js/codescripts.js");              if(isset($_POST["ahlu"]) && !$this->enableMVCJS){          $this->load->model("admin/users_modul");           //require_once($_SERVER["DOCUMENT_ROOT"].'\wp-load.php');          $get = (array) json_decode(stripcslashes(urldecode($_POST["ahlu"])));        $ahlu = new stdClass();       foreach($get as $k => $v){           $ahlu->{$k} = urldecode($v);       }        unset($get);                       $to_email= $this->users_modul->getInfo(1,"manager");        $to_email = $to_email->email;        $subject = "Email Contact by MAGNEX LOGISTICS PTY LTD  Website";        $name = $ahlu->txtName;        $email = $ahlu->txtEmail;        $phone = $ahlu->txtPhone;        $fax = $ahlu->txtFax;        $comment = $ahlu->txtComment;        $headers  = 'MIME-Version: 1.0' . "\r\n";        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";        $headers .= 'From: '.$email . "\r\n";        $message="            <table>                <tr>                    <td style=\"vertical-align:top;\">                        <table>                            <tr style=\"padding-bottom:5px;\">                                <td><span style=\"font-weight:bold;\">Subject</span>: ".$subject."</td>                             </tr>                            <tr style=\"padding-bottom:5px;\">                                <td><span style=\"font-weight:bold;\">Name</span>: ".$name."</td>                             </tr>                            <tr style=\"padding-bottom:5px;\">                                <td><span style=\"font-weight:bold;\">Email</span>: ".$email."</td>                            </tr>                            <tr style=\"padding-bottom:5px;\">                                <td><span style=\"font-weight:bold;\">Phone number</span>: ".$phone."</td>                            </tr>                                             <tr style=\"padding-bottom:5px;\">                                <td><span style=\"font-weight:bold;\">Phone number</span>: ".$fax."</td>                            </tr>                                                                                    <tr style=\"padding-bottom:5px;\">                                <td><span style=\"font-weight:bold;\">Phone number</span>: ".$comment."</td>                            </tr>                                                                                                   </table>                    </td>                </tr>            </table>        ";            die(mail($to_email, $subject, $message, $headers));         }                      $page = __FUNCTION__;        //check is mvcJS       if ($this->enableMVCJS) {         ob_start();         header('content-type: application/json; charset=utf-8');         header("access-control-allow-origin: *");         $ahlu = new stdClass();         $ahlu->html = $this->load->view("home_{$page}",array("page"=>$this->postObj),true);                   die(json_encode(array('d' =>$ahlu)));       }               $seo = new Ahlu_SEO();        $title = $this->option->item("title_website")->value;        $keyword = $this->option->item("keyword")->value;        $seo->setTitle("contact us - ".$title);        $seo->setKeyword($keyword." ".$title);        $seo->setDescription($keyword." ".$title);        $seo->setLanguage($this->short_lang);        $seo->setCharset("utf-8");        $seo->setRobot("index, follow");        $seo->enableMobil();        $this->data["seo"] = $seo->Meta();        $this->data["User_allowed_header"] = 1;          $this->data["header"] = $this->load->view("component/header",array("User_allowed_header"=>$this->data["User_allowed_header"]),true );                 $this->data["content"] = $this->load->view("dev_page_{$page}",array("page"=>$this->postObj),true);        //check if request mvcJS is enbled             //load theme       $this->showTemplate($this->data);    }                public function import($to){                }    public function export($to){            }    }/* End of file welcome.php *//* Location: ./application/controllers/welcome.php */